# =========================================================
# ImmortalWrt x86_64 generic - rootfs 2G
# LuCI(HTTPS) + HomeProxy(sing-box) + DDNS + Docker/Dockerman
# =========================================================

# -------------------------
# Target / Rootfs size
# -------------------------
CONFIG_TARGET_x86=y
CONFIG_TARGET_x86_64=y
CONFIG_TARGET_x86_64_DEVICE_generic=y

# rootfs partition size (MB) -> 2G
CONFIG_TARGET_ROOTFS_PARTSIZE=2048

# image artifacts
CONFIG_TARGET_IMAGES_GZIP=y
CONFIG_TARGET_ROOTFS_TARGZ=y
CONFIG_TARGET_ROOTFS_EXT4FS=y

# -------------------------
# Base LuCI (HTTPS)
# -------------------------
CONFIG_PACKAGE_luci=y
CONFIG_PACKAGE_luci-ssl=y

# -------------------------
# HomeProxy + sing-box
# -------------------------
CONFIG_PACKAGE_homeproxy=y
CONFIG_PACKAGE_luci-app-homeproxy=y

# sing-box core
CONFIG_PACKAGE_sing-box=y

# CA certs for TLS
CONFIG_PACKAGE_ca-bundle=y

# -------------------------
# Firewall / nftables stack (most x86_64 23.05 uses firewall4)
# -------------------------
CONFIG_PACKAGE_firewall4=y
CONFIG_PACKAGE_nftables=y

# TUN often needed by proxy cores
CONFIG_PACKAGE_kmod-tun=y

# -------------------------
# DDNS
# -------------------------
CONFIG_PACKAGE_ddns-scripts=y
CONFIG_PACKAGE_luci-app-ddns=y
CONFIG_PACKAGE_curl=y

# -------------------------
# Docker + Dockerman
# -------------------------
# "docker" meta usually pulls dockerd/containerd/runc dependencies
CONFIG_PACKAGE_docker=y
CONFIG_PACKAGE_luci-app-dockerman=y

# -------------------------
# Storage / Mount helpers (for external data partition)
# -------------------------
CONFIG_PACKAGE_block-mount=y
CONFIG_PACKAGE_e2fsprogs=y
CONFIG_PACKAGE_e2fsprogs-fsck=y
CONFIG_PACKAGE_parted=y
CONFIG_PACKAGE_fdisk=y

# -------------------------
# QoL / Troubleshooting
# -------------------------
CONFIG_PACKAGE_htop=y
CONFIG_PACKAGE_iftop=y
CONFIG_PACKAGE_ip-full=y
CONFIG_PACKAGE_tcpdump=y
CONFIG_PACKAGE_wget-ssl=y
CONFIG_PACKAGE_openssh-sftp-server=y

# -------------------------
# DNS (optional but common)
# -------------------------
CONFIG_PACKAGE_dnsmasq-full=y
