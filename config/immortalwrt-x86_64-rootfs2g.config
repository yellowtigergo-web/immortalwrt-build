# =========================================================
# ImmortalWrt x86_64 generic - rootfs 2G
# LuCI + HTTPS via Nginx (avoid libustream openssl/mbedtls clash)
# HomeProxy(sing-box) + DDNS + Docker/Dockerman
# NO Wi-Fi / NO wireless drivers (explicitly disabled)
# =========================================================

# -------------------------
# Target / Rootfs size
# -------------------------
CONFIG_TARGET_x86=y
CONFIG_TARGET_x86_64=y
CONFIG_TARGET_x86_64_DEVICE_generic=y

# rootfs partition size (MB) -> 2G
CONFIG_TARGET_ROOTFS_PARTSIZE=2048

# images
CONFIG_TARGET_IMAGES_GZIP=y
CONFIG_TARGET_ROOTFS_TARGZ=y
CONFIG_TARGET_ROOTFS_EXT4FS=y

# -------------------------
# LuCI + HTTPS (Nginx)
# -------------------------
CONFIG_PACKAGE_luci=y

# IMPORTANT: use nginx ssl profile instead of luci-ssl (uhttpd+libustream)
CONFIG_PACKAGE_luci-ssl-nginx=y
CONFIG_PACKAGE_nginx-ssl=y

# Make sure we DON'T pull uhttpd+libustream https path
# (These lines help keep defconfig from selecting the uhttpd ssl stack)
# CONFIG_PACKAGE_luci-ssl is not set
# CONFIG_PACKAGE_uhttpd is not set
# CONFIG_PACKAGE_uhttpd-mod-ubus is not set
# CONFIG_PACKAGE_libustream-openssl is not set
# CONFIG_PACKAGE_libustream-openssl20201210 is not set
# CONFIG_PACKAGE_libustream-mbedtls is not set
# CONFIG_PACKAGE_libustream-mbedtls20201210 is not set

# -------------------------
# HomeProxy + sing-box
# -------------------------
CONFIG_PACKAGE_homeproxy=y
CONFIG_PACKAGE_luci-app-homeproxy=y
CONFIG_PACKAGE_sing-box=y
CONFIG_PACKAGE_ca-bundle=y

# -------------------------
# Firewall (nftables)
# -------------------------
CONFIG_PACKAGE_firewall4=y
CONFIG_PACKAGE_nftables=y
CONFIG_PACKAGE_kmod-tun=y

# -------------------------
# DDNS
# -------------------------
CONFIG_PACKAGE_ddns-scripts=y
CONFIG_PACKAGE_luci-app-ddns=y
CONFIG_PACKAGE_curl=y

# -------------------------
# Docker + Dockerman
# -------------------------
CONFIG_PACKAGE_docker=y
CONFIG_PACKAGE_luci-app-dockerman=y

# -------------------------
# Disk / Mount helpers (for external disk)
# -------------------------
CONFIG_PACKAGE_block-mount=y
CONFIG_PACKAGE_e2fsprogs=y
CONFIG_PACKAGE_e2fsprogs-fsck=y
CONFIG_PACKAGE_parted=y
CONFIG_PACKAGE_fdisk=y

# -------------------------
# QoL / Troubleshooting
# -------------------------
CONFIG_PACKAGE_htop=y
CONFIG_PACKAGE_iftop=y
CONFIG_PACKAGE_ip-full=y
CONFIG_PACKAGE_tcpdump=y
CONFIG_PACKAGE_wget-ssl=y
CONFIG_PACKAGE_openssh-sftp-server=y

# -------------------------
# DNS (optional)
# -------------------------
CONFIG_PACKAGE_dnsmasq-full=y


# =========================================================
# Explicitly disable Wi-Fi / AP / wireless stack
# (x86 soft router without wireless hardware)
# =========================================================

# LuCI wireless UI
# CONFIG_PACKAGE_luci-app-wireless is not set

# Wireless tools / info
# CONFIG_PACKAGE_iw is not set
# CONFIG_PACKAGE_iwinfo is not set
# CONFIG_PACKAGE_wireless-tools is not set
# CONFIG_PACKAGE_wireless-regdb is not set

# Wireless framework (cfg80211/mac80211)
# CONFIG_PACKAGE_kmod-cfg80211 is not set
# CONFIG_PACKAGE_kmod-mac80211 is not set

# AP / WPA stack
# CONFIG_PACKAGE_wpad-basic-mbedtls is not set
# CONFIG_PACKAGE_wpad-basic-openssl is not set
# CONFIG_PACKAGE_wpad-mbedtls is not set
# CONFIG_PACKAGE_wpad-openssl is not set
# CONFIG_PACKAGE_hostapd is not set
# CONFIG_PACKAGE_hostapd-common is not set

# Common Wi-Fi drivers (ensure none get pulled in)
# CONFIG_PACKAGE_kmod-ath9k is not set
# CONFIG_PACKAGE_kmod-ath10k is not set
# CONFIG_PACKAGE_kmod-ath11k is not set
# CONFIG_PACKAGE_kmod-mt76 is not set
# CONFIG_PACKAGE_kmod-mt76-core is not set
# CONFIG_PACKAGE_kmod-mt76-usb is not set
# CONFIG_PACKAGE_kmod-iwlwifi is not set
# CONFIG_PACKAGE_kmod-rt2800-usb is not set
# CONFIG_PACKAGE_kmod-rtl8187 is not set
# CONFIG_PACKAGE_kmod-rtl8192cu is not set
# CONFIG_PACKAGE_kmod-rtl88xxau is not set
# CONFIG_PACKAGE_kmod-brcmfmac is not set
